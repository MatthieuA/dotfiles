# Common -- Some are from Damian Conway
alias a='ls -A' # -A all except literal . ..
alias la="ls -A -l -G"
alias l.='ls -d .[^.]*'
alias l='ls -lhGt'  # -l long listing, most recent first
                    # -G color
alias lh="ls -lh"
alias ll='ls -lhG'  # -l long listing, human readable, no group info
alias lt='ls -lt' # sort with recently modified first
alias md='mkdir -p'

alias k9="killall -9"
function killnamed () {
    ps ax | grep $1 | cut -d ' ' -f 2 | xargs kill
}
function zipr() {
  zip -r $1.zip $1
}

# Git
function gch() {
  git clone git://github.com/$USER/$1.git
}

# Setup a tracking branch from [remote] [branch_name]
function gbt() {
  git branch --track $2 $1/$2 && git checkout $2
}
# Quickly clobber a file and checkout
function grf() {
  rm $1
  git checkout $1
}
# Call from inside an initialized Git repo, with the name of the repo.
function new-git() {
  ssh git@example.com "mkdir $1.git && cd $1.git && git --bare init"
  git remote add origin git@example.com:$1.git
  git push origin master
  git config branch.master.remote origin
  git config branch.master.merge refs/heads/master
  git config push.default current
}


# Setup a tunnel
function haproxyssh() {
  ssh -L7997:127.0.0.1:7997 deploy@$1.com
}

# Syntax check Javascript
function jsc() {
  jsl -conf /etc/jsl/jsl.conf -process $1
}

# PostgreSQL
alias pstart='pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start'
alias pstop='pg_ctl -D /usr/local/var/postgres stop -s -m fast'


# Heroku
## Heroku staging
alias staging='heroku run console --remote staging'
alias staging-process='watch heroku ps --remote staging'
alias staging-releases='heroku releases --remote staging'
alias staging-tail='heroku logs --tail --remote staging'

## Heroku production
alias production='heroku run console --remote production'
alias production-process='watch bundle exec heroku ps --remote production'
alias production-releases='heroku releases --remote production'
alias production-tail='heroku logs --tail --remote production'

## Heroku databases
alias db-pull-staging='heroku db:pull --remote staging --confirm `basename $PWD`-staging'
alias db-pull-production='heroku db:pull --remote production --confirm `basename $PWD`-production'
alias db-copy-production-to-staging='heroku pgbackups:restore DATABASE `heroku pgbackups:url --remote production` --remote staging  --confirm `basename $PWD`-staging'
alias db-backup-production='heroku pgbackups:capture --remote production'
alias db-backups='heroku pgbackups --remote production'


# Tested

## Envato
alias cdm='cd ~/Sites/microlancer'
alias seed='rake dev:seed'
alias ss='cdm && rails server'
alias sc='cdm && rails console'
alias sd='cdm && rails dbconsole'

## Navigation
alias cdg='cd ~/Dropbox/Github'
alias cdge='cd ~/Dropbox/Github/Envato'
alias cdgo='cd ~/Dropbox/Github/Other'
alias cdgm='cd ~/Dropbox/Github/MiniJs'
alias cdv='cd ~/Vagrant'
alias cds='cd ~/Sites'
alias cdd='cd ~/Dropbox'
alias desk='cd ~/Desktop'
alias cg='cd /Library/Ruby/Gems/1.8/gems/'

# Utility
alias reload='. ~/.zshrc'
alias ea='subl -w ~/bin/dotfiles/bash/aliases && reload' # Edit aliases
alias ee="subl ~/bin/dotfiles/bash/env"
alias h='history'
alias c='clear'
alias s='cd ..'   # up one dir
alias cls='clear; ls'
alias cl='clear; l'
alias o='open . &'
function cdl() {
    cd $1; ls
}
function take() {
    mkdir -p "$1"
    cd "$1"
}

## Deployment
alias cs='bundle exec cap shell GATEWAY=true ROLES=cc_node'
alias dp='bundle exec deploy:production'


## Git
alias gb='git branch'
alias gd='git diff'
alias gdm='git diff master'
alias gl='git log'
alias ga='git add'
alias gco='git checkout'
alias gc='git commit -v'
alias gca='git commit -v -a'
alias gba='git branch -a'
alias gp='git push origin $(current_branch)'
alias g='git status'
alias gre='git rev-parse HEAD'
alias eg='subl .git/config'
alias ungit="find . -name '.git' -exec rm -rf {} \;"
alias git="hub"
function gg() {
    git commit -m "$*"
}

## Git-Smart
alias gul='git smart-log'
alias gm='git smart-merge'
alias gup='git smart-pull'

## TDD
alias bswf='bundle exec rake swarm:features RAILS_ENV=cucumber'
alias bsws='bundle exec rake swarm:specs RAILS_ENV=test'
alias cu='bundle exec cucumber'
alias cup='bundle exec cucumber -f pretty'
alias cul='bundle exec cucumber log'
alias cwip='bundle exec cucumber -p wip'
alias sp='bundle exec rspec'
alias gr='cdm && guard -g rspec'

## Rails
alias b="bundle exec"
alias bdbm='bundle exec rake db:migrate'
alias bdbp='bundle exec rake db:test:prepare'
alias bdbc='bundle exec rake db:test:clone'
alias tl='tail -f log/*.log'
alias r="rake"

# Processes
alias tu='top -o cpu' # cpu
alias tm='top -o vsize' # memory

# Zeus
alias z="zeus"
alias zc="zeus console"
alias zg="zeus generate"
alias zs="zeus server"
alias zsp="zeus rspec"
alias zspec="zeus rspec spec"
alias zdb="zeus dbconsole"
alias zr="zeus rake"

# Powder
alias p="powder"

# Debugger
alias debug="rdebug -c"

# Postgres
alias psqls="pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start"

# Railscamp
alias cdp="cds && cd guidefindr"
